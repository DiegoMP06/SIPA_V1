import{r as p,W as y,j as e,Y as S}from"./app-Cd6Eq6nm.js";import{I as r}from"./InputError-DM3SsLLD.js";import{I as o}from"./InputLabel-C_PogVTN.js";import{S as m,a as b}from"./SelectInput-DgfgeXlC.js";import{T as n}from"./TextInput-B-VhrcS9.js";import{F as A}from"./FormLayout-BAWXibRu.js";import"./logo_211-Av1HSfMb.js";function M({specialties:u,shifts:x,semesters:c,period:h}){const[_,j]=p.useState([]),g=p.useMemo(()=>c.filter(s=>s.active&&Number(s.semester)!==1),[c]),{data:a,setData:l,post:v,errors:i,processing:f}=y({name:"",mother_last_name:"",father_last_name:"",code:"",curp:"",semester_id:0,shift_id:0,specialty_id:0,period_id:h.id}),N=s=>{s.preventDefault();let t=[];const C=/^([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0\d|1[0-2])(?:[0-2]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)$/;Object.values(a).some(d=>d.toString().trim()===""||d===0)&&(t=["Todos los Campos son Obligatorios",...t]),(a.code.trim().length!==14||isNaN(Number(a.code)))&&(t=["El Numero de Control es Invalido",...t]),a.curp.match(C)||(t=["El CURP es Invalido",...t]),j(t),t.length===0&&v(route("re-registration.store"),{preserveScroll:!0,onSuccess(d){location.href=route("report",{id:d.props.pay})}})};return e.jsxs(A,{title:"Reinscripción",period:h,children:[e.jsx(S,{title:"Reinscripción"}),e.jsx("div",{className:"my-16 px-4 max-w-4xl mx-auto",children:e.jsxs("form",{className:"bg-white shadow p-6 grid grid-cols-1 gap-6",onSubmit:N,children:[e.jsx("div",{children:_.map((s,t)=>e.jsx(r,{message:s},t))}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",children:"Nombre(s):"}),e.jsx(n,{type:"text",name:"name",id:"name",placeholder:"Nombre del Alumno",value:a.name,onChange:s=>l("name",s.target.value)}),e.jsx(r,{message:i.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"father_last_name",children:"Apellido Paterno:"}),e.jsx(n,{type:"text",name:"father_last_name",id:"father_last_name",placeholder:"Apellido Paterno del Alumno",value:a.father_last_name,onChange:s=>l("father_last_name",s.target.value)}),e.jsx(r,{message:i.father_last_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"mother_last_name",children:"Apellido Materno:"}),e.jsx(n,{type:"text",name:"mother_last_name",id:"mother_last_name",placeholder:"Apellido Materno del Alumno",value:a.mother_last_name,onChange:s=>l("mother_last_name",s.target.value)}),e.jsx(r,{message:i.mother_last_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"code",children:"Número de Control:"}),e.jsx(n,{type:"number",name:"code",id:"code",placeholder:"Número de Control del Alumno",value:a.code,onChange:s=>l("code",s.target.value)}),e.jsx(r,{message:i.code})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"curp",children:"CURP:"}),e.jsx(n,{type:"text",name:"curp",id:"curp",placeholder:"CURP del Alumno",value:a.curp,onChange:s=>l("curp",s.target.value)}),e.jsx(r,{message:i.curp})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"semester_id",children:"Semestre:"}),e.jsx(m,{name:"semester_id",id:"semester_id",value:a.semester_id,onChange:s=>l("semester_id",Number(s.target.value)),children:g.map(s=>e.jsx("option",{value:s.id,children:s.semester},s.id))}),e.jsx(r,{message:i.semester_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"specialty_id",children:"Especialidad:"}),e.jsx(m,{name:"specialty_id",id:"specialty_id",value:a.specialty_id,onChange:s=>l("specialty_id",Number(s.target.value)),children:u.map(s=>e.jsx("option",{value:s.id,children:s.specialty},s.id))}),e.jsx(r,{message:i.specialty_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"shift_id",children:"Turno:"}),e.jsx(m,{name:"shift_id",id:"shift_id",value:a.shift_id,onChange:s=>l("shift_id",Number(s.target.value)),children:x.map(s=>e.jsx("option",{value:s.id,children:s.shift},s.id))}),e.jsx(r,{message:i.shift_id})]}),e.jsx(b,{value:"Confirmar",disabled:f})]})})]})}export{M as default};
