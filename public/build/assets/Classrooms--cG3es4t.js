import{r as y,W as N,y as C,j as e}from"./app-Cw66xjMM.js";import{F as _,S as M}from"./FormItem-DGG98HLQ.js";import{I as b}from"./InputError-BLU9BC3S.js";import{I as S}from"./InputLabel-FYVBMu7T.js";import{M as D}from"./Modal-CZN5ZqXP.js";import{S as E}from"./SelectInput-BNDpfLtf.js";import{S as w}from"./sweetalert2.all-N0wpTFe8.js";import"./transition-Kuh-dpYi.js";function L({classrooms:i,subject:l}){const[u,o]=y.useState(!1),[p,g]=y.useState([]),{data:a,setData:n,errors:c,processing:h,reset:d,post:x}=N({semester_id:0,specialty_id:0}),v=()=>{let s=[];return Object.values(a).some(r=>r===0)&&(s=[...s,"Debe seleccionar un semestre y una especialidad"]),i.some(r=>r.semester_id===a.semester_id&&r.specialty_id===a.specialty_id)&&(s=[...s,"Ya existe un grupo con ese semestre y especialidad"]),s},j=s=>{s.preventDefault();const r=v();g(r),!(r.length>0)&&x(route("classrooms.store",{subject:l}),{preserveScroll:!0,onSuccess:m})},m=()=>{o(!1),d()},t=s=>{w.fire({title:"Atención",text:"¿Desea eliminar el grupo?",icon:"warning",showCancelButton:!0,confirmButtonText:"Si, Eliminar",cancelButtonText:"No, Cancelar"}).then(r=>{r.isConfirmed&&C.delete(route("classrooms.destroy",{subject:l,classrooms_subject:s}),{preserveScroll:!0,onSuccess(){w.fire({title:"Exito",text:"El grupo se Elimino Correctamente",icon:"success"})},onError(){w.fire({title:"Error",text:"Ocurrio un Error al Eliminar el grupo",icon:"error"})}})})},f=y.useMemo(()=>i.length>1,[i]);return{alerts:p,activeModal:u,setActiveModal:o,data:a,setData:n,processing:h,errors:c,save:j,closeModal:m,handleDelete:t,canDelete:f}}function T({classrooms:i,semesters:l,specialties:u,subject:o}){const{alerts:p,activeModal:g,setActiveModal:a,data:n,setData:c,processing:h,errors:d,save:x,closeModal:v,handleDelete:j,canDelete:m}=L({classrooms:i,subject:o});return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"space-y-8 my-16",children:[e.jsxs("div",{className:"flex gap-4 items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-indigo-700",children:"Grupos de la Materia:"}),e.jsx("button",{title:"Agregar Grupo",type:"button",className:"bg-indigo-700 hover:bg-indigo-600 transition-colors text-white p-2",onClick:()=>a(!0),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",className:"size-6",viewBox:"0 0 24 24",children:e.jsx("path",{fill:"currentColor",d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2z"})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(t=>e.jsxs("div",{className:"p-4 bg-white shadow-md flex items-center justify-between gap-4",children:[e.jsxs("p",{className:"font-bold text-gray-700 text-lg",children:[t.semester.semester,t.semester.group," - ",t.specialty.specialty]}),m&&e.jsx("button",{type:"button",className:"transition-colors bg-indigo-50 text-indigo-700 p-2 hover:bg-indigo-100",title:"Quitar Grupo",onClick:()=>j(t.id),children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"128",height:"128",className:"size-6",viewBox:"0 0 100 100",children:e.jsx("path",{fill:"currentColor",d:"M84.707 68.752L65.951 49.998l18.75-18.752a1.989 1.989 0 0 0 0-2.813L71.566 15.295a1.99 1.99 0 0 0-2.814 0L49.999 34.047l-18.75-18.752c-.746-.747-2.067-.747-2.814 0L15.297 28.431a1.992 1.992 0 0 0 0 2.814L34.05 49.998L15.294 68.753a1.993 1.993 0 0 0 0 2.814L28.43 84.704a1.988 1.988 0 0 0 2.814 0l18.755-18.755l18.756 18.754c.389.388.896.583 1.407.583s1.019-.195 1.408-.583l13.138-13.137a1.99 1.99 0 0 0-.001-2.814"})})})]},t.id))})]}),e.jsx(D,{show:g,onClose:v,children:e.jsxs("form",{className:"p-4 grid grid-cols-1 gap-4",onSubmit:x,children:[e.jsx("div",{children:p.map((t,f)=>e.jsx(b,{message:t},f))}),e.jsxs(_,{children:[e.jsx(S,{htmlFor:"semester_id",children:"Semestre:"}),e.jsx(E,{name:"semester_id",id:"semester_id",onChange:t=>c("semester_id",Number(t.target.value)),value:n.semester_id,children:l.map(t=>e.jsx("option",{value:t.id,children:t.semester},t.id))}),e.jsx(b,{message:d.semester_id})]}),e.jsxs(_,{children:[e.jsx(S,{htmlFor:"specialty_id",children:"Especialidad:"}),e.jsx(E,{name:"specialty_id",id:"specialty_id",onChange:t=>c("specialty_id",Number(t.target.value)),value:n.specialty_id,children:u.map(t=>e.jsx("option",{value:t.id,children:t.specialty},t.id))}),e.jsx(b,{message:d.specialty_id})]}),e.jsx(M,{value:"Agregar Grupo a la Materia",disabled:h})]})})]})}export{T as default};
