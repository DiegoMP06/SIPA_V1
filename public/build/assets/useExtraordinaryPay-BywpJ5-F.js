import{j as e,r as _,W as y}from"./app-BL-A_wWN.js";import{I as l}from"./InputError-_szSvQ2L.js";import{I as n}from"./InputLabel-Byh6eqOG.js";import{T as h}from"./TextInput-o4T8VisA.js";import{S as u}from"./SelectInput-BHHkm5up.js";import{F as o,S as A}from"./FormItem-Dc6KW2hL.js";import{F}from"./FormReportContainer-C0vALg1O.js";import{S as N}from"./index-O7oXRBwp.js";import{S as E}from"./sweetalert2.all-Dbsf46tK.js";function G({semesters:c,handleSubmit:p,alerts:j,data:t,setData:a,errors:r,shifts:x,specialties:f,processing:g,btnSubmit:v,currentTeachers:C,subjects:b}){return e.jsxs(F,{handleSubmit:p,children:[e.jsx("div",{children:j.map((s,S)=>e.jsx(l,{message:s},S))}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"name",children:"Nombre(s):"}),e.jsx(h,{type:"text",name:"name",id:"name",placeholder:"Nombre del Alumno",value:t.name,onChange:s=>a("name",s.target.value)}),e.jsx(l,{message:r.name})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"father_last_name",children:"Apellido Paterno:"}),e.jsx(h,{type:"text",name:"father_last_name",id:"father_last_name",placeholder:"Apellido Paterno del Alumno",value:t.father_last_name,onChange:s=>a("father_last_name",s.target.value)}),e.jsx(l,{message:r.father_last_name})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"mother_last_name",children:"Apellido Materno:"}),e.jsx(h,{type:"text",name:"mother_last_name",id:"mother_last_name",placeholder:"Apellido Materno del Alumno",value:t.mother_last_name,onChange:s=>a("mother_last_name",s.target.value)}),e.jsx(l,{message:r.mother_last_name})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"code",children:"Número de Control:"}),e.jsx(h,{type:"number",name:"code",id:"code",placeholder:"Número de Control del Alumno",value:t.code,onChange:s=>a("code",s.target.value)}),e.jsx(l,{message:r.code})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"curp",children:"CURP:"}),e.jsx(h,{type:"text",name:"curp",id:"curp",placeholder:"CURP del Alumno",value:t.curp,onChange:s=>a("curp",s.target.value)}),e.jsx(l,{message:r.curp})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"semester_id",children:"Semestre:"}),e.jsx(u,{name:"semester_id",id:"semester_id",value:t.semester_id,onChange:s=>a({...t,semester_id:Number(s.target.value),subject_id:0,teacher_id:0}),children:c.map(s=>e.jsx("option",{value:s.id,children:s.semester},s.id))}),e.jsx(l,{message:r.semester_id})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"specialty_id",children:"Especialidad:"}),e.jsx(u,{name:"specialty_id",id:"specialty_id",value:t.specialty_id,onChange:s=>a({...t,specialty_id:Number(s.target.value),subject_id:0,teacher_id:0}),children:f.map(s=>e.jsx("option",{value:s.id,children:s.specialty},s.id))}),e.jsx(l,{message:r.specialty_id})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"subject_id",children:"Materia:"}),e.jsx(u,{name:"subject_id",id:"subject_id",value:t.subject_id,onChange:s=>a({...t,subject_id:Number(s.target.value),teacher_id:0}),children:b.map(s=>e.jsx("option",{value:s.id,children:s.subject},s.id))}),e.jsx(l,{message:r.subject_id})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"teacher_id",children:"Profesor:"}),e.jsx(u,{name:"teacher_id",id:"teacher_id",value:t.teacher_id,onChange:s=>a("teacher_id",Number(s.target.value)),children:C.map(s=>e.jsxs("option",{value:s.id,children:[s.name," ",s.father_last_name," ",s.mother_last_name]},s.id))}),e.jsx(l,{message:r.teacher_id})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"shift_id",children:"Turno:"}),e.jsx(u,{name:"shift_id",id:"shift_id",value:t.shift_id,onChange:s=>a("shift_id",Number(s.target.value)),children:x.map(s=>e.jsx("option",{value:s.id,children:s.shift},s.id))}),e.jsx(l,{message:r.shift_id})]}),e.jsx(A,{value:v,disabled:g})]})}function H({nameRoute:c}){const[p,j]=_.useState([]),[t,a]=_.useState([]),{data:r,setData:x,post:f,patch:g,errors:v,processing:C}=y({name:"",mother_last_name:"",father_last_name:"",code:"",curp:"",semester_id:0,shift_id:0,specialty_id:0,period_id:0,subject_id:0,teacher_id:0});_.useEffect(()=>{r.semester_id===0||r.specialty_id===0||(a([]),N.searchClassrooms(r.specialty_id,r.semester_id).then(({data:i})=>a(i)).catch(()=>E.fire({icon:"error",title:"Error",text:"Ocurrio un error al cargar las materias"})))},[r.semester_id,r.specialty_id]);const b=()=>{let i=[];const d=/^([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0\d|1[0-2])(?:[0-2]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)$/;return Object.values(r).some(m=>(m==null?void 0:m.toString().trim())===""||m===0)&&(i=["Todos los Campos son Obligatorios",...i]),(r.code.trim().length!==14||isNaN(Number(r.code)))&&(i=["El Numero de Control es Invalido",...i]),r.curp.match(d)||(i=["El CURP es Invalido",...i]),i},s=i=>{i.preventDefault();const d=b();if(j(d),d.length===0){if(r.id){g(route(c+".update",{pay:r.id}),{preserveScroll:!0});return}f(route(c+".store"),{preserveScroll:!0,onSuccess(m){location.href=route(c+".show",{pay:m.props.pay})}})}},S=_.useMemo(()=>{var i;return(((i=t.find(d=>d.id===r.subject_id))==null?void 0:i.teachers)??[]).filter(d=>d.active)},[r,t]);return{alerts:p,subjects:t,currentTeachers:S,data:r,setData:x,errors:v,processing:C,save:s}}export{G as E,H as u};
