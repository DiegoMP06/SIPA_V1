import{r as f,j as e,W as v}from"./app-BL-A_wWN.js";import{I as n}from"./InputError-_szSvQ2L.js";import{I as m}from"./InputLabel-Byh6eqOG.js";import{T as c}from"./TextInput-o4T8VisA.js";import{S as j}from"./SelectInput-BHHkm5up.js";import{F as d,S as C}from"./FormItem-Dc6KW2hL.js";import{F as N}from"./FormReportContainer-C0vALg1O.js";function E({semesters:h,handleSubmit:u,alerts:r,data:i,setData:a,errors:o,shifts:p,specialties:_,processing:x,btnSubmit:g}){const s=f.useMemo(()=>h.filter(t=>t.active),[h]);return e.jsxs(N,{handleSubmit:u,children:[e.jsx("div",{children:r.map((t,l)=>e.jsx(n,{message:t},l))}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"name",children:"Nombre(s):"}),e.jsx(c,{type:"text",name:"name",id:"name",placeholder:"Nombre del Alumno",value:i.name,onChange:t=>a("name",t.target.value)}),e.jsx(n,{message:o.name})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"father_last_name",children:"Apellido Paterno:"}),e.jsx(c,{type:"text",name:"father_last_name",id:"father_last_name",placeholder:"Apellido Paterno del Alumno",value:i.father_last_name,onChange:t=>a("father_last_name",t.target.value)}),e.jsx(n,{message:o.father_last_name})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"mother_last_name",children:"Apellido Materno:"}),e.jsx(c,{type:"text",name:"mother_last_name",id:"mother_last_name",placeholder:"Apellido Materno del Alumno",value:i.mother_last_name,onChange:t=>a("mother_last_name",t.target.value)}),e.jsx(n,{message:o.mother_last_name})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"code",children:"Número de Control o de Ficha:"}),e.jsx(c,{type:"number",name:"code",id:"code",placeholder:"Número de Control o de Ficha del Alumno",value:i.code,onChange:t=>a("code",t.target.value)}),e.jsx(n,{message:o.code})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"curp",children:"CURP:"}),e.jsx(c,{type:"text",name:"curp",id:"curp",placeholder:"CURP del Alumno",value:i.curp,onChange:t=>a("curp",t.target.value)}),e.jsx(n,{message:o.curp})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"semester_id",children:"Semestre:"}),e.jsx(j,{name:"semester_id",id:"semester_id",value:i.semester_id,onChange:t=>a("semester_id",Number(t.target.value)),children:s.map(t=>e.jsx("option",{value:t.id,children:Number(t.semester)===1?"Nuevo Ingreso (Inscripción)":t.semester},t.id))}),e.jsx(n,{message:o.semester_id})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"specialty_id",children:"Especialidad:"}),e.jsx(j,{name:"specialty_id",id:"specialty_id",value:i.specialty_id,onChange:t=>a("specialty_id",Number(t.target.value)),children:_.map(t=>e.jsx("option",{value:t.id,children:t.specialty},t.id))}),e.jsx(n,{message:o.specialty_id})]}),e.jsxs(d,{children:[e.jsx(m,{htmlFor:"shift_id",children:"Turno:"}),e.jsx(j,{name:"shift_id",id:"shift_id",value:i.shift_id,onChange:t=>a("shift_id",Number(t.target.value)),children:p.map(t=>e.jsx("option",{value:t.id,children:t.shift},t.id))}),e.jsx(n,{message:o.shift_id})]}),e.jsx(C,{value:g,disabled:x})]})}function P(){const[h,u]=f.useState([]),{data:r,setData:i,post:a,patch:o,errors:p,processing:_}=v({name:"",mother_last_name:"",father_last_name:"",code:"",curp:"",semester_id:0,shift_id:0,specialty_id:0,period_id:0}),x=()=>{let s=[];const t=/^([A-Z][AEIOUX][A-Z]{2}\d{2}(?:0\d|1[0-2])(?:[0-2]\d|3[01])[HM](?:AS|B[CS]|C[CLMSH]|D[FG]|G[TR]|HG|JC|M[CNS]|N[ETL]|OC|PL|Q[TR]|S[PLR]|T[CSL]|VZ|YN|ZS)[B-DF-HJ-NP-TV-Z]{3}[A-Z\d])(\d)$/;return Object.values(r).some(l=>(l==null?void 0:l.toString().trim())===""||l===0)&&(s=["Todos los Campos son Obligatorios",...s]),r.semester_id===1&&(r.code.trim().length>5||isNaN(Number(r.code)))&&(s=["El Numero de Ficha es Invalido",...s]),r.semester_id!==1&&(r.code.trim().length!==14||isNaN(Number(r.code)))&&(s=["El Numero de Control es Invalido",...s]),r.curp.match(t)||(s=["El CURP es Invalido",...s]),s};return{alerts:h,data:r,setData:i,errors:p,processing:_,save:s=>{s.preventDefault();const t=x();if(u(t),t.length===0){if(r.id){o(route("re-registration.update",{pay:r.id}),{preserveScroll:!0});return}a(route("re-registration.store"),{preserveScroll:!0,onSuccess(l){location.href=route("re-registration.show",{pay:l.props.pay})}})}}}}export{E as R,P as u};
